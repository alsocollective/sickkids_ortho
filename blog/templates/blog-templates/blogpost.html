<html lang="en-ca">
<head>
	
	<script type="text/javascript">
	  /*(function() {
		  console.log("FUN");
	    var config = {
	      kitId: 'qyp0glx',
	      scriptTimeout: 3000
	    };
	    var h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/(\s|^)wf-loading(\s|$)/g," ");h.className+=" wf-inactive"},config.scriptTimeout);var tk=document.createElement("script"),d=false;tk.src='//use.typekit.net/'+config.kitId+'.js';tk.type="text/javascript";tk.async="true";tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(d||a&&a!="complete"&&a!="loaded")return;d=true;clearTimeout(t);try{Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)
	  })();*/
		  
	</script>
	
	<!-- Data Driven Documents (D3) to test for future interaction -->
	<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	
	<!-- If we don't use this use the one above -->
	<script type="text/javascript" src="//use.typekit.net/qyp0glx.js"></script>
	<script type="text/javascript">try{Typekit.load();}catch(e){}</script>

	<script type="text/javascript" src="/static/js/modernizr.js"></script>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0,maximum-scale=10.0,user-scalable=no">
	<!-- <meta name="viewport" content="width=device-width, user-scalable=no"> -->
	<!-- <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> -->
	<title>Sick Kids: Orthopaedic Surgery Fellowship</title>
	
	<link href="/static/css/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css" />
	<link href="/static/css/stylesheets/print.css" media="print" rel="stylesheet" type="text/css" />
	
	<link rel="stylesheet" type="text/css" href="/static/css/pullSlider.css">
	<link rel="stylesheet" type="text/css" href="/static/css/animate-slides.css">

	<script type="text/javascript" src="/static/js/jquery.js"></script>
	<script type="text/javascript">
		// google analytics variables
		var pageSlug,
			hashElements,
			currentHashEl,
			triggersPoints,
			loading = false,
			contentScrollTop = 0;
	</script>
	<script type="text/javascript" src="/static/js/pullSlider-Jquery.js"></script>
	<script type="text/javascript" src="/static/js/script.js"></script>
</head>
<body>
<nav id="nav">
	<img src="/static/img/sickkidslogo.png" alt="Home"/>{% for page in meta.pages %}{%if page.slug == "home"%}{%else%}<a href="/page/{{page.slug}}" class="link-to-page {% if page.title = meta.title%}heighlight{% endif %}">{{page.title}}</a>{%endif%}{% endfor %}
	<div class="deviding-block"> </div>
	<nav id="subnav">
		{%for sections in data%}
			{% if sections.showInSidebar %}
			<a href="#{{sections.slug}}">{{sections.title}}</a>
			{% endif %}
		{% endfor %}
	</nav>
	<div class="last-button"><img src="/static/img/pull-arrow.png"></div>
</nav>

<div id="loading" class="page"></div>
<section id="next-page" class="page"></section>
<section id="content" class="page animate {{meta.slug}}">
	{% block ajaxPart %}
		{% include "blog-templates/ajax-post.html" %}
	{% endblock %}

</section>

<script type="text/javascript">
/* Load ready functions... */
	//sets up the variables
		var loadingElement = $("#loading")[0];
		var animating = false;
		var offsetfindtrigger = -300;
		var mobileWidth = 650;

	//initialize the page
		setupnav();
		resizeRows();
		setupNavClicks($("#subnav")[0]);
		$("#content").on('scroll', scrollDetectionFunc);
		$("#next-page").on('scroll', scrollDetectionFunc);

	//jumps to the position of page relating to the content
		currentHashEl = (document.URL).split("/");
		if(currentHashEl.length > 6){
			currentHashEl = currentHashEl[currentHashEl.length-2]
			$("#content").scrollTop($("#"+currentHashEl).offset().top-100);
		}

	//when back button pressed will refresh the page
		window.onpopstate = function(e){
			if(e.state !== null) {
				location.reload();
			}
		}
</script>

<script>

var width = 400,
    height = 400,
    radius = Math.min(width, height) / 2;

//var color = d3.scale.category20();

var color = d3.scale.linear().domain([1,10]).range(['#733036', '#FCE0DF']);

var pie = d3.layout.pie()
    .value(function(d) { return d.apples; })
    .sort(null);

var arc = d3.svg.arc()
    .innerRadius(radius - 80)
    .outerRadius(radius - 20);


//D3 Selector to append to DOM
	
var svg = d3.select("#piechart").append("svg")
    .attr("width", width)
    .attr("height", height)
  .append("g")
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");
	

//Data input tsv object
	
d3.tsv("/static/vis/vis-data/data.tsv", type, function(error, data) {
  var path = svg.datum(data).selectAll("path")
      .data(pie)
    .enter().append("path")
      .attr("fill", function(d, i) { return color(i); })
      .attr("d", arc)
      .each(function(d) { this._current = d; }); // store the initial angles

  d3.selectAll("input")
      .on("change", change);

  var timeout = setTimeout(function() {
    d3.select("input[value=\"oranges\"]").property("checked", true).each(change);
  }, 2000);

  function change() {
    var value = this.value;
    clearTimeout(timeout);
    pie.value(function(d) { return d[value]; }); // change the value function
    path = path.data(pie); // compute the new angles
    path.transition().duration(750).attrTween("d", arcTween); // redraw the arcs
  }
});

function type(d) {
  d.apples = +d.apples;
  d.oranges = +d.oranges;
  return d;
}

// Store the displayed angles in _current.
// Then, interpolate from _current to the new angles.
// During the transition, _current is updated in-place by d3.interpolate.
function arcTween(a) {
  var i = d3.interpolate(this._current, a);
  this._current = i(0);
  return function(t) {
    return arc(i(t));
  };
}

</script>

</body>
</html>